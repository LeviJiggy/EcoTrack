<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EcoTrack ‚Äì CO‚ÇÇ-Rechner</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background-color: #e8f5e9;
      color: #333;
      overflow-x: hidden;
    }

    header {
      width: 100%;
      padding: 50px 20px;
      background: linear-gradient(90deg, #2e7d32, #66bb6a);
      color: white;
      text-align: center;
      position: relative;
      transition: all 0.5s ease;
    }

    header h1 {
      font-size: 2.8rem;
      margin-bottom: 10px;
    }

    .challenge-box {
      background: #ffffff22;
      border: 2px dashed #ffffff88;
      padding: 15px;
      border-radius: 10px;
      font-size: 1.1rem;
      margin-top: 20px;
      animation: fadeIn 1s ease;
    }

    main {
      padding: 50px 20px;
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
    }

    section {
      display: none;
      animation: fadeIn 0.7s ease;
    }

    section.active {
      display: block;
    }

    h2 {
      font-size: 2rem;
      color: #2e7d32;
      margin-bottom: 20px;
    }

    p {
      font-size: 1.2rem;
      line-height: 1.6;
    }

    button {
      background: #4caf50;
      border: none;
      padding: 14px 28px;
      font-size: 1.1rem;
      border-radius: 10px;
      color: white;
      cursor: pointer;
      margin-top: 30px;
      transition: background 0.3s, transform 0.2s;
    }

    button:hover {
      background: #388e3c;
      transform: scale(1.05);
    }

    select {
      width: 100%;
      padding: 12px;
      font-size: 1rem;
      margin-top: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      transition: all 0.3s ease;
      background-color: white;
    }

    select:hover {
      border-color: #4caf50;
      box-shadow: 0 0 8px rgba(76, 175, 80, 0.3);
    }

    .tip-box {
      background: #eef7ee;
      padding: 20px;
      border-left: 4px solid #4caf50;
      margin-top: 30px;
      border-radius: 8px;
      font-size: 1rem;
    }

    canvas {
      margin-top: 30px;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .loader {
      border: 6px solid #c8e6c9;
      border-top: 6px solid #2e7d32;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 0.8s linear infinite;
      margin: 40px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <h1>EcoTrack ‚Äì Dein CO‚ÇÇ-Fu√üabdruck-Rechner</h1>
    <div class="challenge-box" id="headerChallenge"></div>
  </header>

  <main>
    <section id="intro" class="active">
      <h2>Warum z√§hlt dein CO‚ÇÇ-Fu√üabdruck?</h2>
      <p>Der Klimawandel betrifft uns alle ‚Äì extreme Wetterereignisse, schmelzende Gletscher und Artensterben sind nur einige seiner Folgen. Der CO‚ÇÇ-Fu√üabdruck zeigt, wie viel Treibhausgas du pers√∂nlich verursachst. Durch bewusste Entscheidungen kannst du einen positiven Beitrag leisten.</p>
      <p><strong>EcoTrack</strong> hilft dir dabei: In wenigen Fragen erh√§ltst du eine Einsch√§tzung deines Verbrauchs und erh√§ltst individuelle Tipps zur Reduktion.</p>
      <button onclick="startQuiz()">Jetzt starten</button>
    </section>

    <section id="quizSection"></section>

    <section id="resultSection">
      <h2>Dein CO‚ÇÇ-Ergebnis</h2>
      <div id="co2Output"></div>
      <canvas id="co2Chart" height="200"></canvas>

      <div id="challengeHighlight" style="margin: 40px 0; padding: 30px; background: #dcedc8; border-left: 6px solid #689f38; font-size: 1.2rem; font-weight: bold; border-radius: 12px; text-align: center;"></div>

      <h3>Tipps zur Reduktion</h3>
      <div class="tip-box" id="tipBox"></div>

      <button onclick="location.reload()">Zur√ºck zur Startseite</button>
    </section>
  </main>

  <script>
    const questions = [
      { label: "Wie oft nutzt du ein Auto?", name: "auto", options: [[0, "Nie"], [2, "1‚Äì2x/Woche"], [5, "3‚Äì5x/Woche"], [8, "T√§glich"]] },
      { label: "Wie viele Fl√ºge machst du pro Jahr?", name: "flug", options: [[0, "Nie"], [5, "1‚Äì2x"], [10, "3‚Äì5x"], [15, ">5x"]] },
      { label: "Wie h√§ufig isst du Fleisch?", name: "fleisch", options: [[0, "Nie"], [2, "1‚Äì2x/Woche"], [6, "T√§glich"]] },
      { label: "Wie oft nutzt du √∂ffentliche Verkehrsmittel?", name: "oev", options: [[0, "T√§glich"], [1, "Oft"], [3, "Selten"], [5, "Nie"]] },
      { label: "Welches Heizsystem nutzt du?", name: "heizung", options: [[2, "W√§rmepumpe"], [4, "Gas"], [6, "√ñl"]] },
      { label: "Wie h√§ufig kaufst du Kleidung?", name: "kleidung", options: [[0, "Nie"], [2, "1x"], [4, "2‚Äì3x"], [6, "W√∂chentlich"]] },
      { label: "Wie oft isst du verpacktes Essen?", name: "verpackung", options: [[0, "Nie"], [2, "Selten"], [4, "Oft"], [6, "T√§glich"]] }
    ];

    const tipSuggestions = {
      auto: [
        "üö∂ Weniger Autofahren ‚Äì nutze √∂fter das Rad oder laufe kurze Strecken.",
        "üöó Carsharing kann eine umweltfreundlichere Option sein."
      ],
      flug: [
        "‚úàÔ∏è Fliege weniger ‚Äì nutze Zug oder Videokonferenzen, wenn m√∂glich.",
        "üåç Kompensiere Fl√ºge durch zertifizierte CO‚ÇÇ-Ausgleichsprojekte."
      ],
      fleisch: [
        "ü•ó Reduziere deinen Fleischkonsum ‚Äì pflanzliche Ern√§hrung spart CO‚ÇÇ.",
        "üå± Probiere 1‚Äì2 vegetarische Tage pro Woche."
      ],
      oev: [
        "üöå Nutze √∂ffentliche Verkehrsmittel h√§ufiger ‚Äì das spart CO‚ÇÇ und Geld.",
        "üöÜ Ein Monatsticket kann sich schnell lohnen ‚Äì und hilft der Umwelt."
      ],
      heizung: [
        "üî• √úberpr√ºfe die Effizienz deiner Heizung ‚Äì oder √ºberlege einen Umstieg.",
        "üå°Ô∏è Senke die Raumtemperatur um 1‚Äì2 ¬∞C ‚Äì das spart viel Energie."
      ],
      kleidung: [
        "üëï Weniger Kleidung kaufen ‚Äì Second Hand ist oft nachhaltiger.",
        "üëö Setze auf langlebige, fair produzierte Kleidung."
      ],
      verpackung: [
        "üì¶ Vermeide verpackte Lebensmittel ‚Äì kaufe loses Obst und Gem√ºse.",
        "‚ôªÔ∏è Nutze wiederverwendbare Beh√§lter beim Einkauf."
      ]
    };

    const challenges = [
      "üå± Verzichte diese Woche auf Fleisch!",
      "üö≤ Nutze jeden Tag das Fahrrad oder gehe zu Fu√ü!",
      "üì¶ Bestelle diese Woche nichts online!",
      "üß• Kaufe diese Woche keine neue Kleidung!"
    ];

    let current = 0;
    let formData = [];

    function startQuiz() {
      document.getElementById("intro").classList.remove("active");
      document.getElementById("quizSection").classList.add("active");
      renderQuestion();
    }

    function renderQuestion() {
      const container = document.getElementById("quizSection");
      container.innerHTML = "";

      if (current >= questions.length) return calculateResult();

      const q = questions[current];

      const label = document.createElement("h2");
      label.textContent = `${current + 1}. ${q.label}`;
      container.appendChild(label);

      const select = document.createElement("select");
      select.name = q.name;

      for (const [value, text] of q.options) {
        const option = document.createElement("option");
        option.value = value;
        option.textContent = text;
        select.appendChild(option);
      }

      container.appendChild(select);

      const button = document.createElement("button");
      button.textContent = "Weiter";
      button.onclick = () => {
        formData.push(parseFloat(select.value));
        current++;
        showLoader(renderQuestion);
      };
      container.appendChild(button);
    }

    function showLoader(callback) {
      const container = document.getElementById("quizSection");
      container.innerHTML = "";

      const loaderWrapper = document.createElement("div");
      loaderWrapper.style.display = "flex";
      loaderWrapper.style.flexDirection = "column";
      loaderWrapper.style.justifyContent = "center";
      loaderWrapper.style.alignItems = "center";
      loaderWrapper.style.height = "200px";

      const spinner = document.createElement("div");
      spinner.className = "loader";
      loaderWrapper.appendChild(spinner);

      const loadingText = document.createElement("p");
      loadingText.textContent = "Lade n√§chste Frage ‚Ä¶";
      loadingText.style.marginTop = "16px";
      loadingText.style.fontSize = "1.1rem";
      loadingText.style.color = "#2e7d32";
      loadingText.style.fontWeight = "600";
      loaderWrapper.appendChild(loadingText);

      container.appendChild(loaderWrapper);

      setTimeout(callback, 400);
    }

    function calculateResult() {
      const score = formData.reduce((a, b) => a + b, 0);
      const emission = (score * 0.3).toFixed(2);

      document.getElementById("quizSection").classList.remove("active");
      document.getElementById("resultSection").classList.add("active");

      document.getElementById("co2Output").innerHTML = `<p><strong>Dein gesch√§tzter CO‚ÇÇ-Aussto√ü: ${emission} Tonnen/Jahr</strong></p>`;

      const ctx = document.getElementById("co2Chart").getContext("2d");
      new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Du", "√ñsterreich", "Deutschland", "USA", "China", "Weltweit"],
          datasets: [{
            label: "CO‚ÇÇ (Tonnen/Jahr)",
            data: [emission, 6.65, 9.1, 14.2, 7.6, 4.8],
            backgroundColor: ["#4caf50", "#8e24aa", "#1e88e5", "#fb8c00", "#43a047", "#6d4c41"],
            borderRadius: 6
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              title: { display: true, text: "Tonnen CO‚ÇÇ" }
            }
          }
        }
      });

      // Tipps
      let selectedTips = [];
      questions.forEach((q, i) => {
        const value = formData[i];
        const tipList = tipSuggestions[q.name];
        if (value > 2 && tipList) {
          selectedTips.push(...tipList.slice(0, 2));
        }
      });

      const tipBox = document.getElementById("tipBox");
      tipBox.innerHTML = selectedTips.length
        ? `<ul>${selectedTips.map(t => `<li>${t}</li>`).join("")}</ul>`
        : "üéâ Du machst schon vieles richtig! Weiter so!";

      // Challenge
      document.getElementById("challengeHighlight").textContent =
        "üåü Deine Wochen-Challenge: " + challenges[Math.floor(Math.random() * challenges.length)];
    }

    // Init Challenge in Header
    document.getElementById("headerChallenge").textContent = challenges[Math.floor(Math.random() * challenges.length)];
  </script>
</body>
</html>